{% doc %}
  @prompt
    I need a clean, FAQ page. Here's the copy:
    
    What is CLIME?
    
    CLIME is a personalized energy system that lets you customize your caffeine level and functional boosts — like focus, endurance, and calm — in a fast-absorbing 20 g gel pouch. Each pouch is freshly blended to your specs for energy that fits you. 
    
    Tell me about the flavor and calories in a CLIME pouch.
    
    Each pouch has 50 calories and is a delicious lemon cake flavor. All flavors, sweeteners and active ingredients are nature-derived. 
    
    How is CLIME different from an energy drink or shot?
    
    Energy drinks are one-size-fits-all, loaded with sugar and stimulants that spike and crash. CLIME delivers customized, clean energy through a microgel that absorbs faster and feels smoother — no sugar, no crash, no guesswork.
    
    How long does it take to feel the effects?
    
    Most people feel CLIME working between 5 and 15 minutes. Because it absorbs through both the mouth and stomach, it kicks in faster than capsules or powders.
    
    What makes CLIME “personalized”?
    
    You choose your caffeine dose and performance boosts — Focus, Endurance, Balance, or Duration. Each option adds clinically supported ingredients like Zynamite®, CellFlo6®, EnXtra®, and Lion’s Mane in precise, adjustable amounts.
    
    Can I customize my pouch even after the quiz recommendations?
    
    Absolutely. The quiz gives you a personalized starting point, but you can adjust anything — caffeine level, flavor, or boosts — before checkout. Every pouch is made to order, so your final blend always reflects exactly what you want.
    
    Are the ingredients backed by science?
    
    Yes. Every active ingredient in CLIME is supported by human studies showing measurable effects on focus, endurance, mood, or recovery. 
    
    Is it safe to use every day?
    
    Absolutely. CLIME uses clean, natural actives — no sugar, artificial flavors, or synthetic stimulants. Our ingredients are GRAS (Generally Recognized as Safe) and used at doses found in clinical research. CLIME has just 2 g of sugar, compared to up , The margins in this are off. The copy bleeds off the page. Tighten this up. Also, make the background a light grey
{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-faq-wrapper-{{ ai_gen_id }} {
    background-color: {{ block.settings.background_color }};
    padding: {{ block.settings.section_padding }}px 0;
  }

  .ai-faq-container-{{ ai_gen_id }} {
    max-width: {{ block.settings.max_width }}px;
    margin: 0 auto;
    padding: 0 20px;
  }

  .ai-faq-header-{{ ai_gen_id }} {
    text-align: {{ block.settings.heading_alignment }};
    margin-bottom: {{ block.settings.spacing_between_items }}px;
  }

  .ai-faq-title-{{ ai_gen_id }} {
    font-size: {{ block.settings.heading_size }}px;
    color: {{ block.settings.heading_color }};
    margin: 0 0 12px 0;
    font-weight: 600;
  }

  .ai-faq-subtitle-{{ ai_gen_id }} {
    font-size: {{ block.settings.subheading_size }}px;
    color: {{ block.settings.text_color }};
    margin: 0;
    opacity: 0.8;
  }

  .ai-faq-list-{{ ai_gen_id }} {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .ai-faq-item-{{ ai_gen_id }} {
    border-bottom: 1px solid {{ block.settings.divider_color }};
    margin-bottom: 0;
  }

  .ai-faq-item-{{ ai_gen_id }}:last-child {
    border-bottom: none;
  }

  .ai-faq-question-button-{{ ai_gen_id }} {
    width: 100%;
    text-align: left;
    background: none;
    border: none;
    padding: {{ block.settings.item_padding }}px 40px {{ block.settings.item_padding }}px 0;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 20px;
    position: relative;
  }

  .ai-faq-question-text-{{ ai_gen_id }} {
    font-size: {{ block.settings.question_size }}px;
    color: {{ block.settings.question_color }};
    font-weight: 600;
    margin: 0;
    flex: 1;
    word-wrap: break-word;
    overflow-wrap: break-word;
  }

  .ai-faq-icon-{{ ai_gen_id }} {
    width: 24px;
    height: 24px;
    flex-shrink: 0;
    position: relative;
    transition: transform 0.3s ease;
  }

  .ai-faq-icon-{{ ai_gen_id }}::before,
  .ai-faq-icon-{{ ai_gen_id }}::after {
    content: '';
    position: absolute;
    background-color: {{ block.settings.icon_color }};
    transition: transform 0.3s ease;
  }

  .ai-faq-icon-{{ ai_gen_id }}::before {
    width: 16px;
    height: 2px;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
  }

  .ai-faq-icon-{{ ai_gen_id }}::after {
    width: 2px;
    height: 16px;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
  }

  .ai-faq-item-{{ ai_gen_id }}.active .ai-faq-icon-{{ ai_gen_id }}::after {
    transform: translate(-50%, -50%) rotate(90deg);
  }

  .ai-faq-answer-{{ ai_gen_id }} {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease, padding 0.3s ease;
    padding: 0;
  }

  .ai-faq-item-{{ ai_gen_id }}.active .ai-faq-answer-{{ ai_gen_id }} {
    max-height: 1000px;
    padding: 0 0 {{ block.settings.item_padding }}px 0;
  }

  .ai-faq-answer-content-{{ ai_gen_id }} {
    font-size: {{ block.settings.answer_size }}px;
    color: {{ block.settings.text_color }};
    line-height: 1.6;
    margin: 0;
    padding-right: 40px;
    word-wrap: break-word;
    overflow-wrap: break-word;
  }

  @media screen and (max-width: 749px) {
    .ai-faq-container-{{ ai_gen_id }} {
      padding: 0 16px;
    }

    .ai-faq-title-{{ ai_gen_id }} {
      font-size: calc({{ block.settings.heading_size }}px * 0.8);
    }

    .ai-faq-question-button-{{ ai_gen_id }} {
      padding: {{ block.settings.item_padding }}px 30px {{ block.settings.item_padding }}px 0;
      gap: 12px;
    }

    .ai-faq-question-text-{{ ai_gen_id }} {
      font-size: calc({{ block.settings.question_size }}px * 0.9);
    }

    .ai-faq-answer-content-{{ ai_gen_id }} {
      font-size: calc({{ block.settings.answer_size }}px * 0.9);
      padding-right: 30px;
    }
  }
{% endstyle %}

<div class="ai-faq-wrapper-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  <faq-accordion-{{ ai_gen_id }} class="ai-faq-container-{{ ai_gen_id }}">
    {% if block.settings.heading != blank or block.settings.subheading != blank %}
      <div class="ai-faq-header-{{ ai_gen_id }}">
        {% if block.settings.heading != blank %}
          <h2 class="ai-faq-title-{{ ai_gen_id }}">{{ block.settings.heading }}</h2>
        {% endif %}
        {% if block.settings.subheading != blank %}
          <p class="ai-faq-subtitle-{{ ai_gen_id }}">{{ block.settings.subheading }}</p>
        {% endif %}
      </div>
    {% endif %}

    <ul class="ai-faq-list-{{ ai_gen_id }}">
      {% for i in (1..10) %}
        {% liquid
          assign question_key = 'question_' | append: i
          assign answer_key = 'answer_' | append: i
          assign question = block.settings[question_key]
          assign answer = block.settings[answer_key]
        %}

        {% if question != blank and answer != blank %}
          <li class="ai-faq-item-{{ ai_gen_id }}" data-faq-item>
            <button
              class="ai-faq-question-button-{{ ai_gen_id }}"
              aria-expanded="false"
              data-faq-button
            >
              <h3 class="ai-faq-question-text-{{ ai_gen_id }}">{{ question }}</h3>
              <span class="ai-faq-icon-{{ ai_gen_id }}" aria-hidden="true"></span>
            </button>
            <div class="ai-faq-answer-{{ ai_gen_id }}" data-faq-answer>
              <div class="ai-faq-answer-content-{{ ai_gen_id }}">{{ answer }}</div>
            </div>
          </li>
        {% endif %}
      {% endfor %}
    </ul>
  </faq-accordion-{{ ai_gen_id }}>
</div>

<script>
  (function() {
    class FaqAccordion{{ ai_gen_id }} extends HTMLElement {
      constructor() {
        super();
      }

      connectedCallback() {
        this.items = this.querySelectorAll('[data-faq-item]');
        this.setupEventListeners();
      }

      setupEventListeners() {
        this.items.forEach((item) => {
          const button = item.querySelector('[data-faq-button]');
          
          button.addEventListener('click', () => {
            const isActive = item.classList.contains('active');
            
            if (isActive) {
              this.closeItem(item);
            } else {
              this.openItem(item);
            }
          });
        });
      }

      openItem(item) {
        const button = item.querySelector('[data-faq-button]');
        item.classList.add('active');
        button.setAttribute('aria-expanded', 'true');
      }

      closeItem(item) {
        const button = item.querySelector('[data-faq-button]');
        item.classList.remove('active');
        button.setAttribute('aria-expanded', 'false');
      }
    }

    customElements.define('faq-accordion-{{ ai_gen_id }}', FaqAccordion{{ ai_gen_id }});
  })();
</script>

{% schema %}
{
  "name": "FAQ accordion",
  "settings": [
    {
      "type": "header",
      "content": "Heading"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Frequently Asked Questions"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading"
    },
    {
      "type": "select",
      "id": "heading_alignment",
      "label": "Heading alignment",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        }
      ],
      "default": "left"
    },
    {
      "type": "header",
      "content": "Questions and answers"
    },
    {
      "type": "text",
      "id": "question_1",
      "label": "Question 1",
      "default": "What is CLIME?"
    },
    {
      "type": "richtext",
      "id": "answer_1",
      "label": "Answer 1",
      "default": "<p>CLIME is a personalized energy system that lets you customize your caffeine level and functional boosts — like focus, endurance, and calm — in a fast-absorbing 20 g gel pouch. Each pouch is freshly blended to your specs for energy that fits you.</p>"
    },
    {
      "type": "text",
      "id": "question_2",
      "label": "Question 2",
      "default": "Tell me about the flavor and calories in a CLIME pouch."
    },
    {
      "type": "richtext",
      "id": "answer_2",
      "label": "Answer 2",
      "default": "<p>Each pouch has 50 calories and is a delicious lemon cake flavor. All flavors, sweeteners and active ingredients are nature-derived.</p>"
    },
    {
      "type": "text",
      "id": "question_3",
      "label": "Question 3",
      "default": "How is CLIME different from an energy drink or shot?"
    },
    {
      "type": "richtext",
      "id": "answer_3",
      "label": "Answer 3",
      "default": "<p>Energy drinks are one-size-fits-all, loaded with sugar and stimulants that spike and crash. CLIME delivers customized, clean energy through a microgel that absorbs faster and feels smoother — no sugar, no crash, no guesswork.</p>"
    },
    {
      "type": "text",
      "id": "question_4",
      "label": "Question 4",
      "default": "How long does it take to feel the effects?"
    },
    {
      "type": "richtext",
      "id": "answer_4",
      "label": "Answer 4",
      "default": "<p>Most people feel CLIME working between 5 and 15 minutes. Because it absorbs through both the mouth and stomach, it kicks in faster than capsules or powders.</p>"
    },
    {
      "type": "text",
      "id": "question_5",
      "label": "Question 5",
      "default": "What makes CLIME \"personalized\"?"
    },
    {
      "type": "richtext",
      "id": "answer_5",
      "label": "Answer 5",
      "default": "<p>You choose your caffeine dose and performance boosts — Focus, Endurance, Balance, or Duration. Each option adds clinically supported ingredients like Zynamite®, CellFlo6®, EnXtra®, and Lion's Mane in precise, adjustable amounts.</p>"
    },
    {
      "type": "text",
      "id": "question_6",
      "label": "Question 6",
      "default": "Can I customize my pouch even after the quiz recommendations?"
    },
    {
      "type": "richtext",
      "id": "answer_6",
      "label": "Answer 6",
      "default": "<p>Absolutely. The quiz gives you a personalized starting point, but you can adjust anything — caffeine level, flavor, or boosts — before checkout. Every pouch is made to order, so your final blend always reflects exactly what you want.</p>"
    },
    {
      "type": "text",
      "id": "question_7",
      "label": "Question 7",
      "default": "Are the ingredients backed by science?"
    },
    {
      "type": "richtext",
      "id": "answer_7",
      "label": "Answer 7",
      "default": "<p>Yes. Every active ingredient in CLIME is supported by human studies showing measurable effects on focus, endurance, mood, or recovery.</p>"
    },
    {
      "type": "text",
      "id": "question_8",
      "label": "Question 8",
      "default": "Is it safe to use every day?"
    },
    {
      "type": "richtext",
      "id": "answer_8",
      "label": "Answer 8",
      "default": "<p>Absolutely. CLIME uses clean, natural actives — no sugar, artificial flavors, or synthetic stimulants. Our ingredients are GRAS (Generally Recognized as Safe) and used at doses found in clinical research. CLIME has just 2 g of sugar.</p>"
    },
    {
      "type": "text",
      "id": "question_9",
      "label": "Question 9"
    },
    {
      "type": "richtext",
      "id": "answer_9",
      "label": "Answer 9"
    },
    {
      "type": "text",
      "id": "question_10",
      "label": "Question 10"
    },
    {
      "type": "richtext",
      "id": "answer_10",
      "label": "Answer 10"
    },
    {
      "type": "header",
      "content": "Style"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background",
      "default": "#f8f8f8"
    },
    {
      "type": "range",
      "id": "max_width",
      "min": 600,
      "max": 1200,
      "step": 50,
      "unit": "px",
      "label": "Maximum width",
      "default": 800
    },
    {
      "type": "range",
      "id": "section_padding",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Section padding",
      "default": 40
    },
    {
      "type": "range",
      "id": "item_padding",
      "min": 10,
      "max": 40,
      "step": 2,
      "unit": "px",
      "label": "Item padding",
      "default": 20
    },
    {
      "type": "range",
      "id": "spacing_between_items",
      "min": 20,
      "max": 60,
      "step": 5,
      "unit": "px",
      "label": "Spacing between items",
      "default": 40
    },
    {
      "type": "header",
      "content": "Typography"
    },
    {
      "type": "range",
      "id": "heading_size",
      "min": 20,
      "max": 50,
      "step": 2,
      "unit": "px",
      "label": "Heading size",
      "default": 32
    },
    {
      "type": "range",
      "id": "subheading_size",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Subheading size",
      "default": 16
    },
    {
      "type": "range",
      "id": "question_size",
      "min": 14,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Question size",
      "default": 18
    },
    {
      "type": "range",
      "id": "answer_size",
      "min": 12,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Answer size",
      "default": 16
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading",
      "default": "#121212"
    },
    {
      "type": "color",
      "id": "question_color",
      "label": "Question",
      "default": "#121212"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text",
      "default": "#121212"
    },
    {
      "type": "color",
      "id": "icon_color",
      "label": "Icon",
      "default": "#121212"
    },
    {
      "type": "color",
      "id": "divider_color",
      "label": "Divider",
      "default": "#e0e0e0"
    }
  ],
  "presets": [
    {
      "name": "FAQ accordion"
    }
  ]
}
{% endschema %}